<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Love Proposal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Indie+Flower&display=swap" rel="stylesheet">
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #FFD1DC, #FF69B4);
            font-family: 'Caveat', cursive;
            overflow: hidden;
            position: relative;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0;
                transform: scale(0.9);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50 70 C45 60 45 50 50 40 C55 50 55 60 50 70 Z M48 40 C48 35 50 30 50 25 C50 20 45 15 40 15 C35 15 30 20 30 25 C30 30 35 35 40 35 C44 35 47 38 48 40 Z M52 40 C52 35 50 30 50 25 C50 20 55 15 60 15 C65 15 70 20 70 25 C70 30 65 35 60 35 C56 35 53 38 52 40 Z" fill="%23FF97B7" /></svg>');
            background-size: 100px 100px;
            opacity: 0.2;
            pointer-events: none;
            animation: floatTulips 60s linear infinite;
        }

        @keyframes floatTulips {
            from {
                background-position: 0 0;
            }
            to {
                background-position: 100% 100%;
            }
        }

        #sadGif {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            max-width: 300px;
            max-height: 300px;
            border-radius: 15px;
            z-index: 10;
            display: none;
        }

        #container {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.4);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
            z-index: 5;
            border: 3px solid rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(5px);
        }

        #question {
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-size: 3.5em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .btn {
            position: relative;
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.8em;
            font-family: 'Indie Flower', cursive;
            border-radius: 30px;
            border: 3px solid white;
            background-color: rgba(255, 255, 255, 0.3);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn:hover {
            transform: scale(1.1);
            background-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 6px 8px rgba(0,0,0,0.2);
        }

        #finalMessage {
            color: white;
            font-size: 3.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            display: none;
            font-weight: bold;
            opacity: 0;
            transform: scale(0.5);
        }

        #finalGif {
            max-width: 300px;
            max-height: 300px;
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border: 3px solid rgba(255, 255, 255, 0.6);
            opacity: 0;
            transform: translateY(50px);
        }

        .running-text {
            position: fixed;
            bottom: 20px;
            white-space: nowrap;
            color: white;
            font-size: 2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: marquee 15s linear infinite;
            opacity: 0;
        }

        @keyframes marquee {
            from { transform: translateX(100vw); }
            to { transform: translateX(-100%); }
        }

        .letter-animation {
            display: inline-block;
            animation: jumpAndSpin 1s ease infinite;
            animation-delay: calc(var(--delay) * 100ms);
        }

        @keyframes jumpAndSpin {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(360deg); }
        }

        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FF6B6B"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>');
            background-size: contain;
            animation: float 2s ease-in-out infinite alternate;
            opacity: 0.7;
            z-index: 1;
        }

        @keyframes float {
            from { transform: translateY(0); }
            to { transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <img id="sadGif" src="" alt="Sad GIF">
    
    <div id="container">
        <div id="question">
            Would you be my valentine date?
            <div>
                <button id="yesBtn" class="btn">Yes</button>
                <button id="noBtn" class="btn">No</button>
            </div>
        </div>

        <div id="finalMessage" style="display: none;">
            <div class="animated-text"></div>
            <img id="finalGif" src="https://media.giphy.com/media/3oEduYKjPVbx6vHiJW/giphy.gif" alt="Celebration GIF">
        </div>
    </div>

    <div class="running-text">BEMBANG TIME HEHE</div>

    <script>
        // Create animated text
        const text = "YAYAYYAYAY SEE YOU!!!!";
        const animatedText = document.querySelector('.animated-text');
        
        text.split('').forEach((letter, index) => {
            const span = document.createElement('span');
            span.textContent = letter;
            span.className = 'letter-animation';
            span.style.setProperty('--delay', index);
            animatedText.appendChild(span);
        });

        // Create floating hearts
        function createHearts() {
            for (let i = 0; i < 10; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.top = `${Math.random() * 100}%`;
                heart.style.animationDelay = `${Math.random() * 2}s`;
                document.body.appendChild(heart);
            }
        }
        createHearts();

        const sadGifUrls = [
            "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExdmE0YWJ0d2hybXYxaHlocHRlM2Y0N3ppNmoybTh6bnRreXJvN3Q0aiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/7SF5scGB2AFrgsXP63/giphy.gif",
            "https://media.giphy.com/media/OPU6wzx8JrHna/giphy.gif?cid=ecf05e47vnp7w5ikb397k2qcz3tmac3ufsx347mn5drc9cva&ep=v1_gifs_related&rid=giphy.gif&ct=g",
            "https://media.giphy.com/media/BEob5qwFkSJ7G/giphy.gif?cid=ecf05e4782ahsp0ky611qqp563pxab2ekq0k9m2xzvt7mgup&ep=v1_gifs_related&rid=giphy.gif&ct=g",
            "https://media.giphy.com/media/McNHek8WfyEA8/giphy.gif?cid=ecf05e47m015qssvd2jpdkmu0nm70migsxd1fn0nd7nvmmpe&ep=v1_gifs_related&rid=giphy.gif&ct=g"
        ];

        const sadGif = document.getElementById('sadGif');
        const question = document.getElementById('question');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const finalMessage = document.getElementById('finalMessage');
        const finalGif = document.getElementById('finalGif');

        let sadGifInterval;
        let currentSadGifIndex = 0;

        function showRandomSadGif() {
            sadGif.src = sadGifUrls[currentSadGifIndex];
            sadGif.style.display = 'block';
            currentSadGifIndex = (currentSadGifIndex + 1) % sadGifUrls.length;
        }

        // Start sad GIF rotation 
        sadGifInterval = setInterval(showRandomSadGif, 5000);

        const getRandomNumber = (num) => {
            return Math.floor(Math.random() * (num + 1));
        };

        // Store the original position of the No button
        const originalPosition = {
            left: noBtn.offsetLeft,
            top: noBtn.offsetTop
        };

        // Movement pattern with randomness and return to original
        let movementCount = 0;

        // Create an invisible detection area
        const detectionArea = 100; // pixels around the button
        document.addEventListener('mousemove', function(e) {
            const buttonRect = noBtn.getBoundingClientRect();
            const mouseX = e.clientX;
            const mouseY = e.clientY;

            // Calculate distance from mouse to button center
            const buttonCenterX = buttonRect.left + buttonRect.width / 2;
            const buttonCenterY = buttonRect.top + buttonRect.height / 2;
            const distance = Math.sqrt(
                Math.pow(mouseX - buttonCenterX, 2) + 
                Math.pow(mouseY - buttonCenterY, 2)
            );

            // If mouse is within detection area, move the button
            if (distance < detectionArea) {
                moveButton();
            }
        });

        function moveButton() {
            movementCount++;

            let newLeft, newTop;

            if (movementCount % 4 === 0) {
                // Fourth move: return to original position
                newLeft = originalPosition.left;
                newTop = originalPosition.top;
            } else {
                // Random movement within 400 pixels (increased from 200)
                const maxOffset = 400;
                const offsetX = (Math.random() * 2 - 1) * maxOffset;
                const offsetY = (Math.random() * 2 - 1) * maxOffset;
                
                newLeft = originalPosition.left + offsetX;
                newTop = originalPosition.top + offsetY;
            }

            anime({
                targets: noBtn,
                left: newLeft,
                top: newTop,
                duration: 100,  // Reduced from 200 to 100ms for faster movement
                easing: 'easeOutQuad'
            });
        }

        ["mouseover", "click"].forEach(function (el) {
            noBtn.addEventListener(el, moveButton);
        });

        yesBtn.addEventListener('click', () => {
            clearInterval(sadGifInterval);
            
            // Create confetti effect
            const duration = 3 * 1000;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
            const animationEnd = Date.now() + duration;

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);

                // Create confetti from random positions
                confetti(Object.assign({}, defaults, { 
                    particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 },
                    colors: ['#ff0a54', '#ff477e', '#ff7096', '#ff85a1', '#fbb1bd', '#f9bec7'],
                }));
                confetti(Object.assign({}, defaults, { 
                    particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 },
                    colors: ['#ff0a54', '#ff477e', '#ff7096', '#ff85a1', '#fbb1bd', '#f9bec7'],
                }));
            }, 250);

            // Add some special confetti effects
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ff0a54', '#ff477e', '#ff7096', '#ff85a1', '#fbb1bd', '#f9bec7'],
            });

            // Create heart-shaped confetti
            const end = Date.now() + (3 * 1000);

            // Create heart shapes using emoji
            const hearts = setInterval(function() {
                if (Date.now() > end) {
                    return clearInterval(hearts);
                }

                confetti({
                    particleCount: 2,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    shapes: ['heart'],
                    colors: ['#ff0a54', '#ff477e', '#ff7096']
                });
                confetti({
                    particleCount: 2,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    shapes: ['heart'],
                    colors: ['#ff0a54', '#ff477e', '#ff7096']
                });
            }, 50);
            
            anime({
                targets: [question, sadGif],
                opacity: 0,
                duration: 500,
                complete: () => {
                    question.style.display = 'none';
                    sadGif.style.display = 'none';
                    finalMessage.style.display = 'block';
                }
            });

            anime({
                targets: finalMessage,
                opacity: 1,
                scale: 1,
                duration: 500,
                easing: 'easeOutQuad'
            });

            anime({
                targets: finalGif,
                opacity: 1,
                translateY: 0,
                duration: 500,
                easing: 'easeOutQuad'
            });

            // Show running text with delay
            setTimeout(() => {
                const runningText = document.querySelector('.running-text');
                runningText.style.opacity = 1;
            }, 1000);
        });
    </script>
</body>
</html>
